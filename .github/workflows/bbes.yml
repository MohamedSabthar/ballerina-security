name: BBEs

on:
  push:
    paths:
      - 'bbes/**'
      - '.github/workflows/bbes.yml'
  workflow_dispatch:
    inputs:
      artifact_id:
        description: 'Artifact ID of Ballerina ZIP'
        required: false

jobs:
  crypto:
    name: Cryptographic Operations
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/security
        run: ./crypto.sh
  jwt:
    name: JWT Issue & Validate
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/security
        run: ./jwt.sh
  url:
    name: URL Encode & Decode
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/url
        run: ./url.sh
  http-ssl-tls:
    name: HTTP - SSL/TLS
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_ssl_tls.sh
  http-mtls:
    name: HTTP - mTLS
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_mtls.sh
  http-basic-auth-file-store:
    name: HTTP - Basic Auth (File)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_basic_auth_file_store.sh
  http-basic-auth-ldap-store:
    name: HTTP - Basic Auth (LDAP)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_basic_auth_ldap_store.sh
  http-jwt-auth:
    name: HTTP - JWT Auth
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_jwt_auth.sh
  http-oauth-bearer-token:
    name: HTTP - OAuth2 (Bearer Token)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_oauth2_bearer_token.sh
  http-oauth-client-credentials-grant:
    name: HTTP - OAuth2 (Client Credentials Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_oauth2_client_credentials_grant.sh
  http-oauth-password-grant:
    name: HTTP - OAuth2 (Password Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_oauth2_password_grant.sh
  http-oauth-refresh-token-grant:
    name: HTTP - OAuth2 (Refresh Token Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_oauth2_refresh_token_grant.sh
  http-oauth-jwt-bearer-grant:
    name: HTTP - OAuth2 (JWT Bearer Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/http
        run: ./http_oauth2_jwt_bearer_grant.sh
  graphql-ssl-tls:
    name: GraphQL - SSL/TLS
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/graphql
        run: ./graphql_ssl_tls.sh
  graphql-mtls:
    name: GraphQL - mTLS
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/graphql
        run: ./graphql_mtls.sh
  graphql-basic-auth-file-store:
    name: GraphQL - Basic Auth (File)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/graphql
        run: ./graphql_basic_auth_file_store.sh
  graphql-basic-auth-ldap-store:
    name: GraphQL - Basic Auth (LDAP)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/graphql
        run: ./graphql_basic_auth_ldap_store.sh
  graphql-jwt-auth:
    name: GraphQL - JWT Auth
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/graphql
        run: ./graphql_jwt_auth.sh
  graphql-oauth-bearer-token:
    name: GraphQL - OAuth2 (Bearer Token)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/graphql
        run: ./graphql_oauth2_bearer_token.sh
  websocket-ssl-tls:
    name: WebSocket - SSL/TLS
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_ssl_tls.sh
  websocket-mtls:
    name: WebSocket - mTLS
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_mtls.sh
  websocket-basic-auth-file-store:
    name: WebSocket - Basic Auth (File)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_basic_auth_file_store.sh
  websocket-basic-auth-ldap-store:
    name: WebSocket - Basic Auth (LDAP)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_basic_auth_ldap_store.sh
  websocket-jwt-auth:
    name: WebSocket - JWT Auth
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_jwt_auth.sh
  websocket-oauth-bearer-token:
    name: WebSocket - OAuth2 (Bearer Token)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_oauth2_bearer_token.sh
  websocket-oauth-client-credentials-grant:
    name: WebSocket - OAuth2 (Client Credentials Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_oauth2_client_credentials_grant.sh
  websocket-oauth-password-grant:
    name: WebSocket - OAuth2 (Password Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_oauth2_password_grant.sh
  websocket-oauth-refresh-token-grant:
    name: WebSocket - OAuth2 (Refresh Token Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_oauth2_refresh_token_grant.sh
  websocket-oauth-jwt-bearer-grant:
    name: WebSocket - OAuth2 (JWT Bearer Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/websocket
        run: ./websocket_oauth2_jwt_bearer_grant.sh
  grpc-ssl-tls:
    name: gRPC - SSL/TLS
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_ssl_tls.sh
  grpc-mtls:
    name: gRPC - mTLS
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_mtls.sh
  grpc-basic-auth-file-store:
    name: gRPC - Basic Auth (File)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_basic_auth_file_store.sh
  grpc-basic-auth-ldap-store:
    name: gRPC - Basic Auth (LDAP)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_basic_auth_ldap_store.sh
  grpc-jwt-auth:
    name: gRPC - JWT Auth
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_jwt_auth.sh
  grpc-oauth-bearer-token:
    name: gRPC - OAuth2 (Bearer Token)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_oauth2_bearer_token.sh
  grpc-oauth-client-credentials-grant:
    name: gRPC - OAuth2 (Client Credentials Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_oauth2_client_credentials_grant.sh
  grpc-oauth-password-grant:
    name: gRPC - OAuth2 (Password Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_oauth2_password_grant.sh
  grpc-oauth-refresh-token-grant:
    name: gRPC - OAuth2 (Refresh Token Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_oauth2_refresh_token_grant.sh
  grpc-oauth-jwt-bearer-grant:
    name: gRPC - OAuth2 (JWT Bearer Grant)
    runs-on: ubuntu-latest
    env:
      BALLERINA_VERSION: ${{ secrets.BALLERINA_VERSION }}
      BALLERINA_DOWNLOAD_HOST: ${{ secrets.BALLERINA_DOWNLOAD_HOST }}
      GITHUB_TOKEN: ${{ secrets.BOT_TOKEN }}
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 11
        uses: actions/setup-java@v1
        with:
          java-version: 11
      - name: Download & Install Ballerina
        run: ./_resources/scripts/install.sh ${{ github.event.inputs.artifact_id }}
      - name: Test
        working-directory: bbes/grpc
        run: ./grpc_oauth2_jwt_bearer_grant.sh
